USE MASTER

GO

---CREANDO BASE DE DATOS

IF DB_ID('BD_VENTA') IS NOT NULL

BEGIN

 DROP DATABASE BD_VENTA

END

GO

CREATE DATABASE BD_VENTA

GO



---ACTIVANDO LA NUEVA BASE DE DATOS

USE BD_VENTA

GO



---CREANDO LA TABLA PRODUCTO 

IF OBJECT_ID('PRODUCTO') IS NOT NULL

BEGIN  

  DROP TABLE PRODUCTO

END

GO

CREATE TABLE PRODUCTO

(

NUM_PRO CHAR(7)    PRIMARY KEY,

DES_PRO VARCHAR(70)  NOT NULL,

PRE_UNI MONEY     NOT NULL

)

GO



---CREANDO LA TABLA CLIENTE

IF OBJECT_ID('CLIENTE') IS NOT NULL

BEGIN  

  DROP TABLE CLIENTE

END

GO

CREATE TABLE CLIENTE

(

NUM_CLI INT      PRIMARY KEY,

NOM_CLI VARCHAR(50)  NOT NULL,

DIR_CLI VARCHAR(60)  NOT NULL

)

GO



---CREANDO LA TABLA PEDIDO

IF OBJECT_ID('PEDIDO') IS NOT NULL

BEGIN  

  DROP TABLE PEDIDO

END

GO

CREATE TABLE PEDIDO

(

NUM_PED CHAR(8)    PRIMARY KEY,

FEC_PED DATE     NOT NULL,

NUM_CLI INT      NOT NULL

FOREIGN KEY (NUM_CLI) REFERENCES CLIENTE

)

GO



---CREANDO LA TABLA PED_PRO

IF OBJECT_ID('PED_PRO') IS NOT NULL

BEGIN  

  DROP TABLE PED_PRO

END

GO

CREATE TABLE PED_PRO

(

NUM_PED CHAR(8)    NOT NULL,

NUM_PRO CHAR(7)    NOT NULL,

CAN_PED INT      NOT NULL,

TOT_PED MONEY     NOT NULL

PRIMARY KEY (NUM_PED, NUM_PRO) ,

FOREIGN KEY (NUM_PED) REFERENCES PEDIDO,

FOREIGN KEY (NUM_PRO) REFERENCES PRODUCTO

)

GO

